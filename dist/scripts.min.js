let prevScrollpos=window.pageY;window.onscroll=function(){let e=window.pageYOffset;(prevScrollpos=e)?document.getElementById("hide-header").style.top="-100vh":document.getElementById("hide-header").style.top="0"};let pokemonRepository=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=150",n=document.querySelector("#popup-container");function o(t){"object"!=typeof t?alert("The new Pokémon should have the form of an object"):JSON.stringify(Object.keys(t))!==JSON.stringify(["name","detailsUrl"])?alert("The object should have the following properties: name, detailsUrl"):e.push(t)}function l(e){let t=e.detailsUrl;return c(),fetch(t).then(function(e){return e.json()}).then(function(t){for(e.imageUrl=t.sprites.other.dream_world.front_default,e.abilities=[],i=0;i<t.abilities.length;i++)e.abilities.push(` ${t.abilities[i].ability.name}`);for(e.height=t.height,e.types=[],i=0;i<t.types.length;i++)e.types.push(` ${t.types[i].type.name}`);e.weight=t.weight}).catch(function(e){console.error(e)}).finally(e=>{d()})}function s(e){l(e).then(function(){!function(e){n.innerHTML="",n.classList.add("animate__fadeIn");let t=document.createElement("div"),i=document.createElement("button"),o=document.createElement("img"),l=document.createElement("h1"),s=document.createElement("p");t.classList.add("popup"),t.classList.add("animate__animated"),t.classList.add("animate__zoomIn"),i.innerText="X",i.style.fontSize="24px",o.src=e.imageUrl,o.alt="Picture of selected Pokémon",o.width=300,o.height=300,l.innerText=e.name,s.innerHTML=`\n      <p class="block-level"><span class="capitalize"><b>Abilities: </b>${e.abilities}</p>\n      <p class="block-level"><b>Types: </b>${e.types}</span></p>\n      <p class="block-level"><b>Height: </b>${e.height}0 cm</p>\n      <p class="block-level"><b>Weight: </b>${e.weight}00 g</p>\n      `,n.appendChild(t),t.appendChild(i),t.appendChild(o),t.appendChild(l),t.appendChild(s),n.classList.add("is-visible"),i.addEventListener("click",a),window.addEventListener("keydown",e=>{"Escape"===e.key&&n.classList.contains("is-visible")&&a()}),window.addEventListener("click",e=>{let t=e.target;t===n&&a()})}(e)})}function a(){let e=document.querySelector(".popup");n.classList.add("animate__fadeOut"),n.classList.remove("animate__fadeIn"),e.classList.remove("animate__zoomIn"),e.classList.add("animate__zoomOut"),e.addEventListener("animationend",()=>{n.classList.remove("is-visible"),n.classList.remove("animate__fadeOut")})}function c(){document.querySelector("body").style.cursor="progress"}function d(){document.querySelector("body").style.cursor="default"}return{add:o,getAll:function(){return e},addListItem:function(e){let t=document.querySelector(".pokemon-list"),n=document.createElement("li"),i=document.createElement("button");n.classList.add("pokemon-list__item"),i.innerText=e.name,i.classList.add("pokemon-list__item--button"),n.appendChild(i),t.appendChild(n),i.addEventListener("click",function(){s(e)})},loadList:function(){return c(),fetch(t).then(function(e){return e.json()}).then(function(e){for(item of e.results)o({name:item.name,detailsUrl:item.url})}).catch(function(e){console.error(e)}).finally(e=>{d()})},loadDetails:l,showDetails:s}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});